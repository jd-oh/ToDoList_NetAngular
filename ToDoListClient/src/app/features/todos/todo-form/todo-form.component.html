<div class="todo-form-card">
  <h3>{{ isEditMode ? '✏️ Editar Tarea' : '➕ Nueva Tarea' }}</h3>
  
  <form [formGroup]="form" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label for="title">Título *</label>
      <input
        type="text"
        id="title"
        formControlName="title"
        placeholder="¿Qué necesitas hacer?"
        [class.error]="title?.invalid && title?.touched"
      />
      @if (title?.invalid && title?.touched) {
        <span class="error-message">
          @if (title?.errors?.['required']) {
            El título es requerido
          } @else if (title?.errors?.['maxlength']) {
            El título no puede exceder 200 caracteres
          }
        </span>
      }
    </div>

    <div class="form-group">
      <label for="description">Descripción</label>
      <textarea
        id="description"
        formControlName="description"
        placeholder="Agrega más detalles (opcional)"
        rows="3"
        [class.error]="description?.invalid && description?.touched"
      ></textarea>
      @if (description?.errors?.['maxlength']) {
        <span class="error-message">
          La descripción no puede exceder 1000 caracteres
        </span>
      }
    </div>

    @if (isEditMode) {
      <div class="form-group checkbox-group">
        <label class="checkbox-container">
          <input type="checkbox" formControlName="isCompleted" />
          <span class="checkmark"></span>
          Marcar como completada
        </label>
      </div>
    }

    <div class="form-actions">
      <button type="button" class="btn-cancel" (click)="onCancel()">
        Cancelar
      </button>
      <button type="submit" class="btn-submit">
        {{ isEditMode ? 'Guardar Cambios' : 'Crear Tarea' }}
      </button>
    </div>
  </form>
</div>
